const writeUsButton=document.querySelector(".contacts__button"),feedbackPopup=document.querySelector(".modal_feedback"),feedbackPopupClose=feedbackPopup.querySelector(".modal__close-button"),feedbackForm=feedbackPopup.querySelector(".modal__feedback-form"),usernameInput=feedbackForm.querySelector(".modal__input_type_username"),emailInput=feedbackForm.querySelector(".modal__input_type_email"),feedbackInput=feedbackForm.querySelector(".modal__input_user-comment");let hasStorageSupport=!0,login="",username="";try{login=localStorage.getItem("login"),username=localStorage.getItem("username")}catch(e){hasStorageSupport=!1}function openFeedbackPopup(e){e.preventDefault(),feedbackPopup.classList.add("modal_visible"),usernameInput.focus(),login&&(emailInput.value=login),username&&(usernameInput.value=username)}function openFeedbackPopupKeyboard(e){"Space"===e.code&&openFeedbackPopup(e)}writeUsButton.addEventListener("click",openFeedbackPopup),writeUsButton.addEventListener("keydown",openFeedbackPopupKeyboard),feedbackPopupClose.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.remove("modal_visible"),feedbackPopup.classList.remove("modal_error")}),feedbackForm.addEventListener("submit",function(e){feedbackInput.value&&emailInput.value&&usernameInput.value?hasStorageSupport&&(localStorage.setItem("login",emailInput.value),localStorage.setItem("username",usernameInput.value)):(e.preventDefault(),feedbackPopup.classList.remove("modal_error"),feedbackPopup.offsetWidth=feedbackPopup.offsetWidth,feedbackPopup.classList.add("modal_error"))}),window.addEventListener("keydown",function(e){"Escape"===e.key&&feedbackPopup.classList.contains("modal_visible")&&(e.preventDefault(),feedbackPopup.classList.remove("modal_visible"))});